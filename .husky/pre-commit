# Modern Husky hook (no husky.sh sourcing)
set -e

echo "🔧 Running Vauntico Branded Standards Enforcement..."

# Non-blocking audit (private registries may not support audit endpoints)
pnpm audit --audit-level=high || true

# Optional: run lint-staged if available (does not block if missing)
if command -v pnpm >/dev/null 2>&1; then
  pnpm exec lint-staged || true
fi

# Block on Vauntico lint failures
if node vauntico-lint.cjs; then
  echo "✅ Vauntico standards enforced - commit allowed"
else
  echo "❌ Commit blocked: Vauntico branded standards not met"
  exit 1
fi
